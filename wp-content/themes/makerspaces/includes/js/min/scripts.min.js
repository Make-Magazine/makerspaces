var AUTH0_CLIENT_ID="fTi1CY51C4mP7cWid8IpxJsAmk7uJS7i",AUTH0_DOMAIN="makermedia.auth0.com";if(void 0===templateUrl)var templateUrl=window.location.origin;var AUTH0_CALLBACK_URL=templateUrl+"/authenticate-redirect/",AUTH0_REDIRECT_URL=templateUrl;function playbookSignup(){jQuery.post("https://secure.whatcounts.com/bin/listctrl",jQuery(".playbook-sub-form").serialize()),jQuery(".nl-thx").trigger("click"),jQuery("#playbook_dl")[0].click()}window.addEventListener("load",function(){var n;if(jQuery("#newLoginBtn").length)var e=document.getElementById("newLoginBtn");else(e=document.createElement("div")).setAttribute("id","newLoginBtn");if(jQuery("#newLogoutBtn").length)var t=document.getElementById("newLogoutBtn");else(t=document.createElement("div")).setAttribute("id","newLogoutBtn");if(jQuery("#profile-view").length)var o=document.getElementById("profile-view");else(o=document.createElement("div")).setAttribute("id","profile-view");e.style.display="none",o.style.display="none";var a=new auth0.WebAuth({domain:AUTH0_DOMAIN,clientID:AUTH0_CLIENT_ID,redirectUri:AUTH0_CALLBACK_URL,audience:"https://"+AUTH0_DOMAIN+"/userinfo",responseType:"token id_token",scope:"openid profile email",leeway:60});function r(){if(jQuery("#authenticated-redirect").length)if(localStorage.getItem("redirect_to")){jQuery(".redirect-message").text("You will be redirected to the page you were trying to access shortly.");var e=localStorage.getItem("redirect_to");localStorage.removeItem("redirect_to"),location.href=e}else location.href=templateUrl}function i(){!function(){if(localStorage.getItem("expires_at")){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}return!1}()?(e.style.display="flex",o.style.display="none",jQuery(".logged-in").length?function(){jQuery("#wpadminbar").length&&(jQuery("body").removeClass("adminBar").removeClass("logged-in"),jQuery("#wpadminbar").remove(),jQuery("#mm-preview-settings-bar").remove());jQuery.post(ajax_object.ajax_url,{action:"mm_wplogout"},function(e){window.location.href="https://makermedia.auth0.com/v2/logout?returnTo="+templateUrl+"&client_id="+AUTH0_CLIENT_ID})}():r()):(e.style.display="none",o.style.display="flex",function(){var e=localStorage.getItem("access_token");e||(console.log("Access token must exist to fetch profile"),l("Login without Access Token"));a.client.userInfo(e,function(e,t){t&&(n=t,document.querySelector("#profile-view img").src=n.picture,document.querySelector("#profile-view img").style.display="block",document.querySelector("#profile-view .profile-email").innerHTML=n.email)})}(),jQuery(".logged-in").length?r():setTimeout(function(){!function(){if(void 0!==n){n.sub;var e=localStorage.getItem("access_token"),t=localStorage.getItem("id_token"),o={action:"mm_wplogin",auth0_userProfile:n,auth0_access_token:e,auth0_id_token:t};jQuery.post(ajax_object.ajax_url,o,function(e){r()}).fail(function(){alert("I'm sorry. We had an issue logging you into our system. Please try the login again."),l(n.email+" had an issue logging in at the WP Login phase. That error is: "+JSON.stringify(error)),jQuery("#authenticated-redirect").length&&(jQuery(".redirect-message").text("I'm sorry. We had an issue logging you into our system. Please try the login again."),location.href=templateUrl)})}else jQuery("#authenticated-redirect").length&&(l("Login failed for undefined user: "+n.email+". Timeout."),alert("We're having trouble logging you in and ran out of time. Refresh the page and we'll try harder."),jQuery(".redirect-message").html("<a href='javascript:location.reload();'>Reload page</a>"))}()},320))}function l(e){var t={action:"make_error_log",make_error:e};jQuery.post(ajax_object.ajax_url,t,function(e){})}e.addEventListener("click",function(e){e.preventDefault(),localStorage.setItem("redirect_to",location.href),a.authorize()}),t.addEventListener("click",function(e){e.preventDefault(),localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),window.location.href="https://makermedia.auth0.com/v2/logout?returnTo="+templateUrl+"&client_id="+AUTH0_CLIENT_ID}),a.checkSession({},function(e,t){var o,a;e?(localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),"login_required"!==e.error&&l(n.email+" user had an issue logging in at the checkSession phase. That error was: "+JSON.stringify(e))):(o=t,a=JSON.stringify(1e3*o.expiresIn+(new Date).getTime()),localStorage.setItem("access_token",o.accessToken),localStorage.setItem("id_token",o.idToken),localStorage.setItem("expires_at",a)),i()})}),jQuery(document).ready(function(e){e(".comment-reply-link").addClass("btn btn-primary"),e("#commentsubmit").addClass("btn btn-primary"),e(".widget_search input.search-field").addClass("form-control"),e(".widget_search input.search-submit").addClass("btn btn-default"),e(".widget_rss ul").addClass("media-list"),e(".widget_meta ul, .widget_recent_entries ul, .widget_archive ul, .widget_categories ul, .widget_nav_menu ul, .widget_pages ul").addClass("nav"),e(".widget_recent_comments ul#recentcomments").css("list-style","none").css("padding-left","0"),e(".widget_recent_comments ul#recentcomments li").css("padding","5px 15px"),e("table#wp-calendar").addClass("table table-striped")}),jQuery(document).ready(function(){jQuery(".nav-community").addClass("active-site")}),jQuery(document).ready(function(e){e(".fancybox-thx").fancybox({autoSize:!1,width:400,autoHeight:!0,padding:0,afterLoad:function(){this.content=this.content.html()}}),e(".nl-modal-error").fancybox({autoSize:!1,width:250,autoHeight:!0,padding:0,afterLoad:function(){this.content=this.content.html()}})}),jQuery(document).on("submit",".playbook-sub-form",function(e){e.preventDefault(),grecaptcha.execute()}),function(){var e=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),t=-1<navigator.userAgent.toLowerCase().indexOf("opera"),o=-1<navigator.userAgent.toLowerCase().indexOf("msie");if((e||t||o)&&void 0!==document.getElementById){var a=window.addEventListener?"addEventListener":"attachEvent";window[a]("hashchange",function(){var e=document.getElementById(location.hash.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}}();
//# sourceMappingURL=scripts.min.js.map